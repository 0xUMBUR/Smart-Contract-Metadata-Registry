{"address":"0x27a3D7caCa26cc53eD3cBb0363f0190B5e78AcD3","name":"","metadata":{"compiler":{"version":"0.6.12+commit.27d51765"},"language":"Solidity","output":{"abi":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"toTokenAmount","type":"uint256"}],"name":"LogBurnGiven","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"spendAmount","type":"uint256"}],"name":"LogChiToppedUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"feeAmount","type":"uint256"}],"name":"LogFeeTaken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"LogFeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"fromTokenAmount","type":"uint256"}],"name":"LogMintTaken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_NewSFToken","type":"address"}],"name":"LogSFTokenUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"Manager","type":"address"}],"name":"LogValueManagerUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"pool","type":"address"},{"indexed":false,"internalType":"enum ValueHolder.PoolType","name":"poolType","type":"uint8"}],"name":"LogVotedExtPoolUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"pool","type":"address"}],"name":"LogVotedUniPoolUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"Voter","type":"address"}],"name":"LogVoterUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_NewXChanger","type":"address"}],"name":"LogXChangerUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"SFToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ValueManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"Voter","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"}],"name":"addExt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"}],"name":"addUni","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"toToken","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"i","type":"uint256"}],"name":"delExt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"i","type":"uint256"}],"name":"delUni","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"denominateTo","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"extLen","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"externalPools","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract IUniswapV2Exchange","name":"uniPool","type":"address"}],"name":"getDenominatedValue","outputs":[{"internalType":"uint256","name":"myreserve0","type":"uint256"},{"internalType":"uint256","name":"myreserve1","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getExternalValue","outputs":[{"internalType":"uint256","name":"totalReserve","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalValue","outputs":[{"internalType":"uint256","name":"totalReserve","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract IUniswapV2Exchange","name":"uniPool","type":"address"}],"name":"getUniReserve","outputs":[{"internalType":"uint256","name":"myreserve0","type":"uint256"},{"internalType":"uint256","name":"myreserve1","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_votePool","type":"address"},{"internalType":"enum ValueHolder.PoolType","name":"_votePoolType","type":"uint8"},{"internalType":"address","name":"_sfToken","type":"address"},{"internalType":"address","name":"_Xchanger","type":"address"}],"name":"init","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lastblock","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"fromToken","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_pool","type":"address"},{"internalType":"enum ValueHolder.PoolType","name":"_poolType","type":"uint8"},{"internalType":"address","name":"fromToken","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"fromToken","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mintQuote","outputs":[{"internalType":"uint256","name":"returnAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"pickPoolToExtract","outputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"enum ValueHolder.PoolType","name":"poolType","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"fromToken","type":"address"},{"internalType":"contract IERC20","name":"toToken","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"quote","outputs":[{"internalType":"uint256","name":"returnAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_extPool","type":"address"},{"internalType":"enum ValueHolder.PoolType","name":"_votePoolType","type":"uint8"},{"internalType":"address","name":"_sfToken","type":"address"},{"internalType":"address","name":"_Xchanger","type":"address"}],"name":"reInit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rebase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"value","type":"uint256"}],"name":"rebase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"TokenAddress","type":"address"}],"name":"retrieveToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"fromToken","type":"address"},{"internalType":"contract IERC20","name":"toToken","type":"address"},{"internalType":"uint256","name":"returnAmount","type":"uint256"}],"name":"reverseQuote","outputs":[{"internalType":"uint256","name":"inputAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"i","type":"uint256"}],"name":"setExtLen","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_NewSFToken","type":"address"}],"name":"setSFToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"i","type":"uint256"}],"name":"setUniLen","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_ValueManager","type":"address"}],"name":"setValueManager","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votedChi","type":"uint256"}],"name":"setVotedChi","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votedFee","type":"uint256"}],"name":"setVotedFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"enum ValueHolder.PoolType","name":"poolType","type":"uint8"}],"name":"setVotedPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_Voter","type":"address"}],"name":"setVoter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_Xchanger","type":"address"}],"name":"setXChangerImpl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"fromToken","type":"address"},{"internalType":"contract IERC20","name":"toToken","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bool","name":"slipProtect","type":"bool"}],"name":"swap","outputs":[{"internalType":"uint256","name":"returnAmount","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"Token","type":"address"},{"internalType":"uint256","name":"amountAvailable","type":"uint256"}],"name":"topUpChi","outputs":[{"internalType":"uint256","name":"spendAmount","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"uniLen","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"uniPools","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"updateRebase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"votedChi","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votedFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votedPool","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votedPoolType","outputs":[{"internalType":"enum ValueHolder.PoolType","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"xchanger","outputs":[{"internalType":"contract XChanger","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}],"devdoc":{"details":"Main contract controlling the Mint/Burn/Rebase operations of a token. Retrieves values from a multiple external/internal (Uni) pools in denominated [DAI] tokens","kind":"dev","methods":{"addExt(address)":{"details":"add new External pool - only by Voter"},"addUni(address)":{"details":"add new Uni pool - only by Voter"},"burn(address,uint256)":{"details":"Main method to burn S/F tokens and get back the requested amount from denominated token [DAI] to user NB: flashloan attacks shold be discouraged NB: considering to split it into 2 separate transactions, to disregard the flashloan use. "},"delExt(uint256)":{"details":"remove External pool - only by Voter"},"delUni(uint256)":{"details":"remove a Uni pool - only by Voter"},"getDenominatedValue(address)":{"details":"method to return the denominated [DAI] uni pool value owned by the user"},"getExternalValue()":{"details":"method to return the external pool total value"},"getTotalValue()":{"details":"method to return total value of the fund from all the external and internal (uni) pools plus the own balance if there is one"},"getUniReserve(address)":{"details":"method to return the amount of tokens in the uni LP pool owned by the holder"},"init(address,uint8,address,address)":{"details":"initializer method instead of a constructor - to be used behind a proxy"},"isOwner()":{"details":"Returns true if the caller is the current owner."},"mint(address,uint256)":{"details":"Generic Mint to the Voted Pool"},"mint(address,uint8,address,uint256)":{"details":"Main mint S/F token method takes any token, converts it as required and puts it into a default (Voted) pool resulting additional value is minted as S/F tokens (denominated in [DAI]) some Chi may be taken from the input value to make the transaction cheaper and leave some Chi for future transactions"},"mintQuote(address,uint256)":{"details":"Method to tell us roughly how much resulting S/F token will be minted from the token given TODO: implement UNI pools"},"owner()":{"details":"Returns the address of the current owner."},"pickPoolToExtract(uint256)":{"details":"Method to pick a suitable Uni/External pool to extract the required value for burning"},"quote(address,address,uint256)":{"details":"get a price of one token amount in another","params":{"amount":"- of the fromToken","fromToken":"- token we want to change/spend","toToken":"- token we want to receive/spend to"}},"reInit(address,uint8,address,address)":{"details":"re-initializer might be helpful for the cases where proxy's storage is corrupted by an old contact, but we cannot run init as we have the owner address already. This method might help fixing the storage state."},"rebase()":{"details":"ValueManager can run onchain rebase any time as required"},"rebase(uint256)":{"details":"ValueManager can run an arbitrary rebase too - to save on gas as this TX is much cheaper This is really a workaround that should be disregarded by the community"},"renounceOwnership()":{"details":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions anymore. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby removing any functionality that is only available to the owner."},"retrieveToken(address)":{"details":"Value Manager can only access the tokens at this contract. Normally it is not used in the workflow."},"reverseQuote(address,address,uint256)":{"details":"get a reverse price of one token amount in another the opposite of above 'quote' method when we need to understand how much we need to spend actually","params":{"fromToken":"- token we want to change/spend","returnAmount":"- of the toToken","toToken":"- token we want to receive/spend to"}},"setExtLen(uint256)":{"details":"to fix the length on the Ext pool array might be not needed but good for testing/fixing storage state"},"setSFToken(address)":{"details":"set a new S/F ERC20 token address - only if we need to"},"setUniLen(uint256)":{"details":"to fix the length on the Uni pool array might be not needed but good for testing/fixing storage state"},"setValueManager(address)":{"details":"set new Value Manager address"},"setVotedChi(uint256)":{"details":"set new Chi amount to hold in the contract to save gas for mint/burn TXs"},"setVotedFee(uint256)":{"details":"set new fee amount - used upon exit. value 200 = 2% fee"},"setVotedPool(address,uint8)":{"details":"set new Voted (default) pool for adding value"},"setVoter(address)":{"details":"set new Voter address"},"setXChangerImpl(address)":{"details":"set new XChanger/XTrinity address"},"swap(address,address,uint256,bool)":{"details":"swap one token to another given the amount we want to spend","params":{"amount":"- of the fromToken we are spending","fromToken":"- token we want to change/spend","slipProtect":"- flag to ensure the transaction will be performed if the received amount is not less than expected within the given slip %% range (like 1%)","toToken":"- token we want to receive/spend to"}},"topUpChi(address,uint256)":{"details":"Check if we have enough CHi token in the contract and obtain some by minting or using exchanges TODO: check if msg.sender can give us some too"},"transferOwnership(address)":{"details":"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."},"updateRebase()":{"details":"method for Value Manager to claim vaue from external (CompMiner) pool by collecting COMP, converting to [DAI] and then adding back to the same pool () TODO: change from VotedPool to a loop from external pools if needed"}},"stateVariables":{"Voter":{"details":"some functions should be available only to Voter address - separate contract is TBD"}},"title":"ValueHolder main administrative contract","version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"compilationTarget":{"localhost/ValueHolder_flat.sol":"ValueHolder"},"evmVersion":"istanbul","libraries":{},"metadata":{"bytecodeHash":"ipfs"},"optimizer":{"enabled":true,"runs":2000},"remappings":[]},"sources":{"localhost/ValueHolder_flat.sol":{"keccak256":"0xd726435b033fcbf56576922b83c0725962262f3b200b55733e475de0f05aa81c","license":"MIT","urls":["bzz-raw://3438ea7906f75195c6181c4fcd6a01533b6a94a49f3a0d4883b1218532227508","dweb:/ipfs/QmdKcgZ5hLmFNhfbJpN9hxiqG4whLzajNWKCvBWhHZAHwN"]}},"version":1},"version":1,"checkPoints":[]}