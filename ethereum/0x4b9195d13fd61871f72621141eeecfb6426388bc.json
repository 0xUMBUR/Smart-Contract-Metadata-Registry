{"address":"0x4B9195D13fd61871f72621141eEECfb6426388bC","name":"","metadata":{"compiler":{"version":"0.6.12+commit.27d51765"},"language":"Solidity","output":{"abi":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"executionId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"rate","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalBalance","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalRedeemed","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalBought","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalAucBurned","type":"uint256"}],"name":"CompoundRedeem","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"rate","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"baseExecutionId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"baseExecutionAmountForFee","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"totalRedeemed","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"yield","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalAucBurned","type":"uint256"}],"name":"Finish","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Redeem","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"previousContract","type":"address"}],"name":"SetMigration","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"oldTime","type":"uint256"}],"name":"SetMinimumTimeBetweenExecutions","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newAdmin","type":"address"},{"indexed":false,"internalType":"address","name":"oldAdmin","type":"address"}],"name":"SetProxyAdmin","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newImplementation","type":"address"},{"indexed":false,"internalType":"address","name":"oldImplementation","type":"address"}],"name":"SetProxyImplementation","type":"event"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"addEscrow","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"executeCompoundRedeem","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"executionId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"executions","outputs":[{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"uint256","name":"rate","type":"uint256"},{"internalType":"uint256","name":"totalDai","type":"uint256"},{"internalType":"uint256","name":"totalRedeemed","type":"uint256"},{"internalType":"uint256","name":"totalBought","type":"uint256"},{"internalType":"uint256","name":"totalBalance","type":"uint256"},{"internalType":"uint256","name":"totalFeeDeduction","type":"uint256"},{"internalType":"uint256","name":"feeAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeExemptionAmountForAucEscrowed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"feeExemptionAmountForUserBaseData","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"feeExemptionNormalizedDifference","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"finish","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"forceFinish","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"forceRedeem","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getMinimumTimeForNextExecution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserAssetRedeemed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"time","type":"uint256"}],"name":"getUserEstimatedCurrentFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserEstimatedCurrentProfitWithoutFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserProfitsAndFeeAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserTotalInvested","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"implementation","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_minimumTimeBetweenExecutions","type":"uint256"}],"name":"init","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"previousContract","type":"address"},{"internalType":"address[]","name":"users","type":"address[]"}],"name":"initMigratingData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isCompound","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minimumTimeBetweenExecutions","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"redeem","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"remainingValueRedeemed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"time","type":"uint256"}],"name":"setMinimumTimeBetweenExecutions","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"tokenAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"totalBalanceNormalizedDifference","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"usersData","outputs":[{"internalType":"uint256","name":"baseExecutionId","type":"uint256"},{"internalType":"uint256","name":"baseExecutionAvgRate","type":"uint256"},{"internalType":"uint256","name":"baseExecutionAccumulatedAmount","type":"uint256"},{"internalType":"uint256","name":"baseExecutionAccumulatedWeightForRate","type":"uint256"},{"internalType":"uint256","name":"baseExecutionAmountForFee","type":"uint256"},{"internalType":"uint256","name":"currentAllocated","type":"uint256"},{"internalType":"uint256","name":"previousAllocated","type":"uint256"},{"internalType":"uint256","name":"previousProfit","type":"uint256"},{"internalType":"uint256","name":"previousAssetAmount","type":"uint256"},{"internalType":"uint256","name":"previousFeeAmount","type":"uint256"},{"internalType":"uint256","name":"redeemed","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"destination","type":"address"}],"name":"withdrawStuckToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}],"devdoc":{"details":"The contract is proxied for dPiggyAssetProxy. It is created and managed by dPiggy contract that is also the contract admin. Implements all operations for the Dai deposited for an asset.","kind":"dev","methods":{"addEscrow(address)":{"details":"Function to set the fee exemption due to the Auc escrowed for the user. Only can be called by the admin (dPiggy contract).","params":{"user":"User's address. "},"returns":{"_0":"True if the user has some Dai deposited on the asset otherwise False. "}},"deposit(address,uint256)":{"details":"Function to deposit Dai. Only can be called by the admin (dPiggy contract). On deposit, it sets all previous Dai profit, asset profit and fee amount until the last Compound redeem execution. It sets stored data to be able to calculate the proportional profit and fee on the next Compound redeem execution because the rate is a weighted average of all deposits rate in this period (between executions)  and the same for the fee that should be proportional to the number of days in this period.","params":{"amount":"Amount of Dai deposited.","user":"User's address. "}},"executeCompoundRedeem()":{"details":"Function to execute the Compound redeem. It is redeemed all Dai profit for the period: (total on Compound contract - total deposited). The fee is calculated over total Dai deposited minus:  - Amount of Dai of the users that has Auc escrowed.  - Proportional amount of Dai for users that deposited Dai between last execution and current execution.     The fee is charged only during the days that the Dai was invested, not all period. The amount of Dai for the fee is used to buy Auc on Uniswap and then the Auc is burned. So the remaining amount of Dai redeemed is used to buy the respective asset on Uniswap. The execution is general, not for a user, the distribution of profit to each user is calculated on redeem/finish functions."},"finish()":{"details":"Function to finish the sender's participation for the asset. The asset profit is redeemed as well as all the Dai deposited."},"forceFinish(address)":{"details":"Function to force finish of the user participation for the asset. The asset profit is redeemed as well as all the Dai deposited. Only can be called by the admin (dPiggy contract).","params":{"user":"User's address. "}},"forceRedeem(address)":{"details":"Function to force redeem of the asset profit for the user address. Only can be called by the admin (dPiggy contract).","params":{"user":"User's address. "}},"getMinimumTimeForNextExecution()":{"details":"Function to get the minimum time for the next Compound redeem execution.","returns":{"_0":"The minimum time in Unix for the next Compound redeem execution."}},"getUserAssetRedeemed(address)":{"details":"Function to get the amount of asset redeemed for the user.","params":{"user":"User's address. "},"returns":{"_0":"The amount of asset redeemed. "}},"getUserEstimatedCurrentFee(address,uint256)":{"details":"Function to get the estimated current fee in Dai for the user. To estimate the amount of fee on the Compound redeem execution is calculated by the difference between the `time` and the last execution time. So it is not the total amount of fee, for an estimated total of the fee in Dai:  `getUserAssetProfitAndFeeAmount(second return)` + `getUserEstimatedCurrentFee`.","params":{"time":"The Unix time to calculate the fee. It should be the current Unix time. ","user":"User's address. "},"returns":{"_0":"The estimated fee in Dai. "}},"getUserEstimatedCurrentProfitWithoutFee(address)":{"details":"Function to get the estimated current gross profit in Dai for the user. So it is not the total gross profit, it is only for the user amount of Dai on the next Compound redeem execution. The estimative of the amount of Dai on the Compound redeem execution considering the current Compound stored rate. For an estimated total of the gross profit: `getUserProfit` + `getUserEstimatedCurrentProfitWithoutFee`.","params":{"user":"User's address. "},"returns":{"_0":"The estimated gross profit in Dai. "}},"getUserProfitsAndFeeAmount(address)":{"details":"Function to get the user's Dai gross profit, asset net profit and the fee amount in Dai.","params":{"user":"User's address. "},"returns":{"_0":"The user's Dai gross profit, asset net profit and the fee amount charged in Dai.  First return is the gross profit in Dai. Second return is the asset net profit. Third return is the fee amount charged in Dai."}},"getUserTotalInvested(address)":{"details":"Function to get the amount of Dai deposited for the user.","params":{"user":"User's address. "},"returns":{"_0":"The amount of Dai deposited. "}},"init(address,uint256)":{"details":"Function to initialize the contract. It should be called through the `data` argument when creating the proxy. It must be called only once. The `assert` is to guarantee that behavior.","params":{"_minimumTimeBetweenExecutions":"The minimum time in seconds between executions to run the Compound redeem.","_tokenAddress":"The ERC20 token address on the chain or '0x0' for Ethereum. It is the asset for the respective contract. "}},"initMigratingData(address,address[])":{"details":"Function to initialize the contract migrating the data from another contract. It should be called through the `data` argument when creating the proxy. It must be called only once. The `assert` is to guarantee that behavior.","params":{"previousContract":"The contract to copy the data. ","users":"The users to copy their stored data."}},"redeem()":{"details":"Function to redeem the asset profit for the sender address."},"setMinimumTimeBetweenExecutions(uint256)":{"details":"Function to set the minimum time between the Compound redeem executions. Only can be called by the admin (dPiggy contract).","params":{"time":"New minimum time in seconds between the Compound redeem executions."}}},"title":"DPiggyAsset","version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"compilationTarget":{"localhost/DPiggyAsset.sol":"DPiggyAsset"},"evmVersion":"istanbul","libraries":{},"metadata":{"bytecodeHash":"ipfs"},"optimizer":{"enabled":true,"runs":200},"remappings":[]},"sources":{"localhost/Address.sol":{"keccak256":"0x2842c172d1afbc79ed066102b4a219405dfa01c9a5de6b97daf7e4905516e005","urls":["bzz-raw://b67f73520a9cbef74ebfff936fc395d6eaf3e254a472a57f791fcb629890bfeb","dweb:/ipfs/QmaJgXwGVZZ8pZtc7QZARDHG3jWDHB8cPia824oJEjS9N2"]},"localhost/AucInterface.sol":{"keccak256":"0x54081d71391bc83b2c65f8f989544ef559b52d2f31d8f73447e4de1d0235ad63","urls":["bzz-raw://8be4a9d9eb38af587217635372cf548e0c9f78525304276e60b3b0e4e9196320","dweb:/ipfs/Qmd4L4LozJkXMW1eAnx7XmQLTrBEXqhZN6Tr7oWkJL1zZr"]},"localhost/CompoundInterface.sol":{"keccak256":"0xdfc43bd48b6436f103927963e3f9b63466a4cd656fe22530ff494095d69d5232","urls":["bzz-raw://c0d6882c54909e47043d0495436e8aedae19872fdf9049d0890758f5e8700341","dweb:/ipfs/QmeiVvfCv8v1Ar8wVQt774ox1vLiZLbDg7nE8XoYpyVTmZ"]},"localhost/DPiggyAsset.sol":{"keccak256":"0x4e58ef29cd840d32415c56564cde18d4627a1d15fb1071a0738e661a17b26d63","urls":["bzz-raw://90b76a4630f405117f3079b0d3ee9d0609a9c1be3accc2b7133d8354e9af9665","dweb:/ipfs/QmcGaFcRXZUTcM7wHqGJCoig6FjPE2QV2wtkjSyCBVAyoc"]},"localhost/DPiggyAssetData.sol":{"keccak256":"0x0aae249f4b847db0a0c9649bb75ec777cefdbc1d2d3c137a8b8a92ce147f96ea","urls":["bzz-raw://65efa7d4b938c3d771db38b2d1ee96a22da286167135c7b5a74cf4bb53255168","dweb:/ipfs/QmXZxR921zMjVNS2c4dmJ7MLtXbKeuGCBTjsWXNJN8ET5D"]},"localhost/DPiggyAssetInterface.sol":{"keccak256":"0xdc26a7c81c05b0afada57f011b0f9fbbf2415918889ef5f8a3a8d9455aa86b4a","urls":["bzz-raw://1c3eda8bfa7fe46f48e1ffe21ea3c9ec11b2195e7d0b37b42dc145f5f8874af5","dweb:/ipfs/QmfT7KkrFurzNs7oVD13Px1cU1viZ2gkeUZZyGjEUYuama"]},"localhost/DPiggyBaseProxyData.sol":{"keccak256":"0xc19fd56df743f6136a28598a0664c67352cff2c5b97f592a866840290d789f7b","urls":["bzz-raw://f2f8ef1738f892d309c0b6c6a425d92d72f13e3da4162d39d397c0b8fd0e31ab","dweb:/ipfs/QmRkGgo362TCBPKWyqg1HsuaL4mP9rkr1gZgSZ7xtQTbii"]},"localhost/DPiggyInterface.sol":{"keccak256":"0x7a6f63882c042175c9fc706a511aae67d1f80f4ab5a88d54e0ad45881efcb91a","urls":["bzz-raw://cba6dd6455bc4aed86b9c86ef0231d7d21627f1813ce522d289a0a8b18d75869","dweb:/ipfs/QmeX5XRcq36AovKo4zv6wXr9nbE6YGkqbGR2QHsVzWb9zy"]},"localhost/EIP20Interface.sol":{"keccak256":"0x3ad5b9cf5528c5d97ed1c1889f7efd1af3b9af0ab521594dea27686eccc835bc","urls":["bzz-raw://8040a7ca4b8ee26c8a25b8e09b0e8daab1f03a8139356d15f8f02e45c47557b5","dweb:/ipfs/QmZA4TH59GMKRQZpiWR5nuaSfX5xHkAX4hBzxMnkZTMLPP"]},"localhost/ReentrancyGuard.sol":{"keccak256":"0x579629d7796a0ff4acff3903daf201231bb45b54af82ba51d280035fb419dec7","urls":["bzz-raw://c12e9d49cd6ccd855f1fd03ef17bf198726fbf1b6e2214979eb24bac6197e81c","dweb:/ipfs/QmPwg8FG3XZw8GhXyXnEi6VNtnu5DjH5e5FNzoxyM3uYwS"]},"localhost/SafeMath.sol":{"keccak256":"0xd53af6bfe6cfce474e262c4974749708d19417b6c0a44ea2a64314fd2d95600e","urls":["bzz-raw://b42659e48c83c2de8794a441e9b3c097f8975fc6692fa74e7f8cf5b490127084","dweb:/ipfs/QmPKDdJ96SY8eUupe2JjNPftTcUnMFzGUn7hg2jx2Xt6ye"]},"localhost/UniswapExchangeInterface.sol":{"keccak256":"0x77c855b4cdcb98920de794c7efb8f68b8b434766a9894e4a0ce09a7fd740e0a7","urls":["bzz-raw://edcb796e5e48f3eba9ac35c684b895878c52ef7e2326d09e62afb0a9573c4e7c","dweb:/ipfs/QmZFvCxRP6cjfenUpz4ARp1xJCz5k8cB9WK3zZRyhDkx22"]}},"version":1},"version":1,"checkPoints":[]}