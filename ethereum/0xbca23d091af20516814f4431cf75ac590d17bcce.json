{"address":"0xbCA23d091AF20516814f4431cF75ac590d17BCCE","name":"","metadata":{"compiler":{"version":"0.6.12+commit.27d51765"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"dotxTokenAddress","type":"address"},{"internalType":"address","name":"dotxLibAddr","type":"address"},{"internalType":"bool","name":"setupAddressInLib","type":"bool"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"warIndex","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"balance","type":"uint256"},{"indexed":false,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"string","name":"txType","type":"string"}],"name":"ClaimReward","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"warIndex","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"burnValue","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"stakeValue","type":"uint256"}],"name":"StakeBurn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"warIndex","type":"uint256"},{"indexed":false,"internalType":"string","name":"from","type":"string"},{"indexed":false,"internalType":"string","name":"to","type":"string"},{"indexed":false,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"valueInDoTx","type":"uint256"}],"name":"SwitchHouse","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"warIndex","type":"uint256"},{"indexed":false,"internalType":"string","name":"house","type":"string"},{"indexed":false,"internalType":"uint256","name":"valueInDoTx","type":"uint256"},{"indexed":false,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"string","name":"txType","type":"string"}],"name":"TicketBought","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"WarStarted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"closePriceFetched","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"openPriceFetched","type":"event"},{"inputs":[],"name":"BURN_ADDRESS","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"burnPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_houseTicker","type":"string"},{"internalType":"uint256","name":"_numberOfTicket","type":"uint256"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"buyTickets","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"x","type":"bytes32"}],"name":"bytes32ToString","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"pure","type":"function"},{"inputs":[{"components":[{"internalType":"bytes32","name":"houseTicker","type":"bytes32"},{"internalType":"bytes32","name":"houseId","type":"bytes32"},{"internalType":"uint256","name":"openPrice","type":"uint256"},{"internalType":"uint256","name":"closePrice","type":"uint256"},{"internalType":"uint256","name":"ticketsBought","type":"uint256"}],"internalType":"struct DoTxGameContract.House","name":"house","type":"tuple"},{"internalType":"bool","name":"isBurn","type":"bool"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"calculateBurnStaking","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"claimRewardAndTickets","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"dotxLibAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"fetchFirstDayPrices","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"fetchLastDayPrices","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"firstHouseClose","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"firstHouseOpen","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"getBurnStake","outputs":[{"components":[{"internalType":"uint256","name":"firstHouseBurnDoTx","type":"uint256"},{"internalType":"uint256","name":"firstHouseStakingDoTx","type":"uint256"},{"internalType":"uint256","name":"secondHouseBurnDoTx","type":"uint256"},{"internalType":"uint256","name":"secondHouseStakingDoTx","type":"uint256"}],"internalType":"struct DoTxGameContract.BurnStake","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_winningHouse","type":"bytes32"},{"internalType":"address","name":"userAddress","type":"address"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"getCurrentReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_winningHouse","type":"string"},{"internalType":"address","name":"userAddress","type":"address"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"getCurrentRewardString","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"userAddress","type":"address"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"getFeesForSwitchHouse","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_warIndex","type":"uint256"},{"internalType":"string","name":"houseTicker","type":"string"}],"name":"getHouse","outputs":[{"components":[{"internalType":"bytes32","name":"houseTicker","type":"bytes32"},{"internalType":"bytes32","name":"houseId","type":"bytes32"},{"internalType":"uint256","name":"openPrice","type":"uint256"},{"internalType":"uint256","name":"closePrice","type":"uint256"},{"internalType":"uint256","name":"ticketsBought","type":"uint256"}],"internalType":"struct DoTxGameContract.House","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_warIndex","type":"uint256"},{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUser","outputs":[{"components":[{"internalType":"bytes32","name":"houseTicker","type":"bytes32"},{"internalType":"uint256","name":"ticketsBought","type":"uint256"},{"internalType":"bool","name":"rewardClaimed","type":"bool"}],"internalType":"struct DoTxGameContract.User","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_warIndex","type":"uint256"},{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserDoTxInBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"min","type":"uint256"},{"internalType":"uint256","name":"max","type":"uint256"}],"name":"getWarsHouses","outputs":[{"components":[{"internalType":"uint256","name":"index","type":"uint256"},{"internalType":"bytes32","name":"firstHouse","type":"bytes32"},{"internalType":"bytes32","name":"secondHouse","type":"bytes32"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"duration","type":"uint256"}],"internalType":"struct DoTxGameContract.WarHouses[20]","name":"","type":"tuple[20]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"multiplicator","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner2","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"secondHouseClose","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"secondHouseOpen","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"selectWinner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"selecteWinnerPrecision","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"dotxLibAddr","type":"address"},{"internalType":"bool","name":"setupAddressInLib","type":"bool"}],"name":"setDoTxLib","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"int256","name":"_multiplicator","type":"int256"}],"name":"setMultiplicator","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"int256","name":"_multiplicator","type":"int256"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"setMultiplicatorWar","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"ownerAddress","type":"address"}],"name":"setOwner2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_precision","type":"uint256"}],"name":"setSelectWinnerPrecision","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"stakingAdr","type":"address"}],"name":"setStakingAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_burnPercentage","type":"uint256"},{"internalType":"uint256","name":"_stakingPercentage","type":"uint256"}],"name":"setStakingBurnPercentage","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_burnPercentage","type":"uint256"},{"internalType":"uint256","name":"_stakingPercentage","type":"uint256"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"setStakingBurnPercentageWar","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stakingPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_firstHouseTicker","type":"string"},{"internalType":"string","name":"_secondHouseTicker","type":"string"},{"internalType":"string","name":"_firstHouseId","type":"string"},{"internalType":"string","name":"_secondHouseId","type":"string"},{"internalType":"uint256","name":"_duration","type":"uint256"},{"internalType":"uint256","name":"_ticketPrice","type":"uint256"},{"internalType":"uint256","name":"_purchasePeriod","type":"uint256"},{"internalType":"uint256","name":"_warFeesPercent","type":"uint256"},{"internalType":"uint256","name":"_warIndex","type":"uint256"}],"name":"startWar","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"source","type":"string"}],"name":"stringToBytes32","outputs":[{"internalType":"bytes32","name":"result","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"string","name":"_fromHouseTicker","type":"string"},{"internalType":"string","name":"_toHouseTicker","type":"string"},{"internalType":"uint256","name":"warIndex","type":"uint256"}],"name":"switchHouse","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalFees","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"wars","outputs":[{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"duration","type":"uint256"},{"internalType":"uint256","name":"ticketPrice","type":"uint256"},{"internalType":"uint256","name":"purchasePeriod","type":"uint256"},{"internalType":"bytes32","name":"winningHouse","type":"bytes32"},{"internalType":"uint256","name":"warFeesPercent","type":"uint256"},{"internalType":"int256","name":"multiplicator","type":"int256"},{"internalType":"uint256","name":"burnPercentage","type":"uint256"},{"internalType":"uint256","name":"stakingPercentage","type":"uint256"},{"components":[{"internalType":"bytes32","name":"houseTicker","type":"bytes32"},{"internalType":"bytes32","name":"houseId","type":"bytes32"},{"internalType":"uint256","name":"openPrice","type":"uint256"},{"internalType":"uint256","name":"closePrice","type":"uint256"},{"internalType":"uint256","name":"ticketsBought","type":"uint256"}],"internalType":"struct DoTxGameContract.House","name":"firstHouse","type":"tuple"},{"components":[{"internalType":"bytes32","name":"houseTicker","type":"bytes32"},{"internalType":"bytes32","name":"houseId","type":"bytes32"},{"internalType":"uint256","name":"openPrice","type":"uint256"},{"internalType":"uint256","name":"closePrice","type":"uint256"},{"internalType":"uint256","name":"ticketsBought","type":"uint256"}],"internalType":"struct DoTxGameContract.House","name":"secondHouse","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawFees","outputs":[],"stateMutability":"nonpayable","type":"function"}],"devdoc":{"author":"Maxime Reynders - DefiOfThrones (https://github.com/DefiOfThrones/DOTTokenContract)","kind":"dev","methods":{},"title":"DeFi Of Thrones Game Contract","version":1},"userdoc":{"kind":"user","methods":{"buyTickets(string,uint256,uint256)":{"notice":"Buy ticket(s) for the current war - only if tickets are purchasable -> purchasePeriod Parameters : _houseTicker House ticker  _numberOfTicket The number of tickets the user wants to buy*"},"bytes32ToString(bytes32)":{"notice":"Convert bytes32 to string*"},"claimRewardAndTickets(uint256)":{"notice":"Allow users who pledged allegiance to the winning house to claim bought tickets + reward Parameters :*"},"constructor":"Game contract constructor Just pass the DoTx token contract address in parameter*","fetchFirstDayPrices(uint256)":{"notice":"Fetch the prices for the 2 houses the first day for the current war*"},"fetchLastDayPrices(uint256)":{"notice":"Fetch the prices for the 2 houses the last day for the current war*"},"firstHouseClose(uint256,uint256)":{"notice":"Handler method called by Chainlink for the first house close price *"},"firstHouseOpen(uint256,uint256)":{"notice":"Handler method called by Chainlink for the first house open price *"},"getBurnStake(uint256)":{"notice":"Return burn stake information*"},"getCurrentRewardString(string,address,uint256)":{"notice":"Calculate the reward for the current user*"},"getHouse(uint256,string)":{"notice":"Return house for a specific war*"},"getUser(uint256,address)":{"notice":"Returns the current user*"},"getUserDoTxInBalance(uint256,address)":{"notice":"Get user (ticketsBought * ticketPrice) - user fees*"},"secondHouseClose(uint256,uint256)":{"notice":"Handler method called by Chainlink for the second house close price *"},"secondHouseOpen(uint256,uint256)":{"notice":"Handler method called by Chainlink for the second house open price *"},"selectWinner(uint256)":{"notice":"Elect the winner based on open prices & close prices*"},"setDoTxLib(address,bool)":{"notice":"Let owner set the DoTxLib address*"},"setMultiplicator(int256)":{"notice":"Precision of the prices receive from WS*"},"setMultiplicatorWar(int256,uint256)":{"notice":"Precision of the prices receive from WS*"},"setSelectWinnerPrecision(uint256)":{"notice":"Set the select winner precision used for calculate the best house's performance*"},"setStakingAddress(address)":{"notice":"Let owner update stakingAddress*"},"setStakingBurnPercentage(uint256,uint256)":{"notice":"Set staking % of the losing house's DoTx to send*"},"setStakingBurnPercentageWar(uint256,uint256,uint256)":{"notice":"Set staking % of the losing house's DoTx to send for the currentWar*"},"startWar(string,string,string,string,uint256,uint256,uint256,uint256,uint256)":{"notice":"Start a war only if the previous is finished Parameters : _firstHouseTicker First house ticker  _secondHouseTicker Second house ticker  _duration Duration of the war in seconds  _ticketPrice Ticket price : Number of DoTx needed to buy a ticket (in wei precision) purchasePeriod Number of seconds where the users can buy tickets from the starting date _warFeesPercent How many % fees it will cost to user to switch house  _warIndex Index of the war in mapping*"},"stringToBytes32(string)":{"notice":"Convert string to bytes32*"},"switchHouse(string,string,uint256)":{"notice":"Switch house for the user - only if tickets are purchasable -> purchasePeriod Parameters : _fromHouseTicker Current house user pledged allegiance  _toHouseTicker the house user wants to join*"},"withdrawFees()":{"notice":"Let owner withdraw DoTx fees (in particular to pay the costs generated by Chainlink)*"}},"version":1}},"settings":{"compilationTarget":{"browser/tests/DoTxGameContract.sol":"DoTxGameContract"},"evmVersion":"istanbul","libraries":{},"metadata":{"bytecodeHash":"ipfs"},"optimizer":{"enabled":false,"runs":200},"remappings":[]},"sources":{"browser/tests/DoTxGameContract.sol":{"keccak256":"0xcfa39b27dce89479e57134bed0bb88cae2be0393d040d75ada4006b6a758383e","urls":["bzz-raw://a524aa2a5ddb0808b175eaed87365c28e378695fe44aec4d21fd731fe5ffd6d6","dweb:/ipfs/QmNurF6B7F7V8Zupq5263Yjzb6y3j9itUk4ApS3B2RQMoa"]},"https://raw.githubusercontent.com/DefiOfThrones/DOTTokenContract/master/IDotTokenContract.sol":{"keccak256":"0xf0c5a9f417e7db324f3426aa13bd479f567c22ee7cbc7cea9f8cf4e40be076ae","urls":["bzz-raw://6fb8e1147d355436bf17bc854681e621a91ce11162f658fd6c82ee21114a8d09","dweb:/ipfs/QmPp8dr3aqMgqpd75xMdrVHk18chbXxGVSTEizmVvnGzQq"]},"https://raw.githubusercontent.com/DefiOfThrones/DOTTokenContract/master/libs/SafeMath.sol":{"keccak256":"0x0ec1a1c723dbcd5daf26ec2c24544fa4927f19d32a0285bc9501f0c95e66e5f0","urls":["bzz-raw://016535be5c50310c0f4161ac01e391039d4e45c7b1708c84f59d694e5aca9a0f","dweb:/ipfs/Qme5pQ6gWFrhBfL7JTLWnpEPJ8ZpTbfBDwAHKE6kPPXwuM"]}},"version":1},"version":1,"checkPoints":[]}