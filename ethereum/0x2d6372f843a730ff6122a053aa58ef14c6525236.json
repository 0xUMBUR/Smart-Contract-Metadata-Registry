{"address":"0x2D6372F843a730fF6122a053AA58EF14C6525236","name":"","metadata":{"compiler":{"version":"0.6.12+commit.27d51765"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_auctionFeeTo","type":"address"},{"internalType":"address","name":"_stakeFeeTo","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"URIController","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"auctionFeeTo","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"shardId","type":"uint256"},{"internalType":"uint256","name":"bidAmount","type":"uint256"}],"name":"bid","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"target","type":"address"}],"name":"changeStakeFeeToAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"NFT","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"URIString","type":"string"}],"name":"changeURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"target","type":"address"}],"name":"changeURIController","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"claimStakeFeeRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"shardId","type":"uint256"}],"name":"claimWonShard","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"shardId","type":"uint256"}],"name":"getAdjustedRewardsBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"shardId","type":"uint256"}],"name":"getAuctionData","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getShardAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"shardAddress","type":"address"},{"internalType":"address","name":"mainAddress","type":"address"},{"internalType":"uint256","name":"auctionStartTime","type":"uint256"},{"internalType":"uint256","name":"auctionDuration","type":"uint256"},{"internalType":"uint256","name":"auctionStartPrice","type":"uint256"},{"internalType":"string","name":"mainURIString","type":"string"},{"internalType":"string","name":"shardURIString","type":"string"}],"name":"initializeShards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"initialized","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"query","type":"address"}],"name":"isOnlyOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"redeemMain","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"shardId","type":"uint256"}],"name":"redeemShard","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"shardStakes","outputs":[{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"uint256","name":"claimTimestamp","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"stakeFeeTo","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}],"devdoc":{"author":"Zer0dot","details":"This contract manages both a main NFT and its shards. It sets up a simple on-chain auction and implements three potential fee models:  1. An auction claim fee  2. A consistent allocation, claimed at any time from the staked deposit rewards  3. A redemption fee (To the artist, in this case). The auction fees are sent to the \"auctionFeeTo\" address and the stake fees are sent to the stakeFeeTo address. The reason they cannot be stored in the same variable, to be swapped  after auctions complete, is because shard redeeming and stake fee claiming are asynchronous.  ","kind":"dev","methods":{"bid(uint256,uint256)":{"details":"This function places a bid on the auction for the given shard ID.  Requirements:  1. Auctions must be initialized  2. Auctions must have started  3. Auctions must not have concluded  4. Bid must be higher than the current bid Requires approval from the AAVE contract.","params":{"bidAmount":"the amount of AAVE to bid","shardId":"The shard ID to bid on"}},"changeStakeFeeToAddress(address)":{"details":"This function transfers the stakeFeeTo role to a given address.","params":{"target":"The address to transfer the stakeFeeTo role to."}},"changeURI(address,uint256,string)":{"details":"This function changes the shard/main NFT URI in case of a URI location update.","params":{"NFT":"The address of the shard/main NFT contract to alter the URI for.","URIString":"The new URI.","id":"The ID of the shard/main NFT to alter the URI for."}},"changeURIController(address)":{"details":"This function transfers the URI controlling role to a given address.","params":{"target":"The address to transfer the URIController role to."}},"claimStakeFeeRewards()":{"details":"This function can only be called by the stakeFeeTo address, and it receives all pending rewards."},"claimWonShard(uint256)":{"details":"This function claims a shard won in an auction, sending the fee to the \"feeTo\" address in the process. Requirements:  1. The auctions must have been initialized  2. The auctions must be over  3. The caler must be the auction winner","params":{"shardId":"The shard NFT ID to claim."}},"constructor":{"details":"The constructor initializes the auctionFeeTo, stakeFeeTo and URIController addresses. The fee addresses are set to given parameters, whereas the URIController is defaulted to this contract's deployer.","params":{"_auctionFeeTo":"The address to send the auction fee to.","_stakeFeeTo":"The address to send the staking fee to."}},"getAdjustedRewardsBalance(uint256)":{"details":"Returns a tuple containing, first, the staked AAVE balance and second, the AAVE staking  reward associated with that shard.","params":{"shardId":"The shard NFT ID to query rewards for."}},"getAuctionData(uint256)":{"details":"Returns the data on a given auction.","params":{"shardId":"The ERC721 ID of the shard to query the current bid price for."}},"getShardAddress()":{"details":"Returns the address of this main NFT's associated shard address. "},"initializeShards(address,address,uint256,uint256,uint256,string,string)":{"details":"This function, which can only be called once by the URIController, initializes the shard contract as  well as the shard auctions.","params":{"auctionDuration":"The duration auctions should last for, in seconds.","auctionStartPrice":"The auction starting price, in AAVE.","auctionStartTime":"The starting timestamps for the auctions.","mainAddress":"The main NFT contract address with this address whitelisted for minting.","mainURIString":"The URI to use for the main NFT.","shardAddress":"The shard NFT contract address with this address whitelisted for minting.","shardURIString":"the URI to use for the shard NFTs."}},"isOnlyOwner(address)":{"details":"This function returns true only if the queried address is the last holder of shard NFTs, other than this contract. This is done by comparing the balance of the query and this contract to the total shards amount.","params":{"query":"The address to query."}},"redeemMain()":{"details":"This function redeems the main NFT. This function sends back all of the redeemed  shards, as well as any leftover Aave rewards and stkAAVE. Finally it transfers the main NFT itself.   Requires the caller to be the last holder of any shard NFT, bar this contract."},"redeemShard(uint256)":{"details":"This function redeems the caller's shard, transferring in their shard NFT and  sending back their accrued rewards and stkAAVE. This is only call-able by the shard owner, and cannot be called if they are the ONLY owner. Requires approval from the shard contract."}},"title":"AaveNFTAuction Contract","version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"compilationTarget":{"contracts/AaveNFTAuction.sol":"AaveNFTAuction"},"evmVersion":"istanbul","libraries":{},"metadata":{"bytecodeHash":"ipfs"},"optimizer":{"enabled":false,"runs":200},"remappings":[]},"sources":{"@openzeppelin/contracts/introspection/IERC165.sol":{"keccak256":"0xf70bc25d981e4ec9673a995ad2995d5d493ea188d3d8f388bba9c227ce09fb82","license":"MIT","urls":["bzz-raw://bd970f51e3a77790c2f02b5b1759827c3b897c3d98c407b3631e8af32e3dc93c","dweb:/ipfs/QmPF85Amgbqjk3SNZKsPCsqCw8JfwYEPMnnhvMJUyX58je"]},"@openzeppelin/contracts/math/SafeMath.sol":{"keccak256":"0x3b21f2c8d626de3b9925ae33e972d8bf5c8b1bffb3f4ee94daeed7d0679036e6","license":"MIT","urls":["bzz-raw://7f8d45329fecbf0836ad7543330c3ecd0f8d0ffa42d4016278c3eb2215fdcdfe","dweb:/ipfs/QmXWLT7GcnHtA5NiD6MFi2CV3EWJY4wv5mLNnypqYDrxL3"]},"@openzeppelin/contracts/token/ERC20/IERC20.sol":{"keccak256":"0x5f02220344881ce43204ae4a6281145a67bc52c2bb1290a791857df3d19d78f5","license":"MIT","urls":["bzz-raw://24427744bd3e6cb73c17010119af12a318289c0253a4d9acb8576c9fb3797b08","dweb:/ipfs/QmTLDqpKRBuxGxRAmjgXt9AkXyACW3MtKzi7PYjm5iMfGC"]},"@openzeppelin/contracts/token/ERC20/SafeERC20.sol":{"keccak256":"0xf12dfbe97e6276980b83d2830bb0eb75e0cf4f3e626c2471137f82158ae6a0fc","license":"MIT","urls":["bzz-raw://b3a849c2d95e85463909e5b5c920b13e7a11216ca14127085e16d22b9379d52a","dweb:/ipfs/QmUg3CZDbCCcQdroEpexBy5ZFd5vD1UWijWQq9qHZjtJNQ"]},"@openzeppelin/contracts/token/ERC721/IERC721.sol":{"keccak256":"0x5a9f5c29bd7cf0b345e14d97d5f685f68c07e1e5bfdd47e5bcec045e81b0b6ac","license":"MIT","urls":["bzz-raw://321cbaa1412fc8d013d8ad3fb5f98c0db7401ddacfb09b70828ea2cebe37397e","dweb:/ipfs/Qmd3Hoc71w6rmxAR6A5VKW9at677VP1L5KDcJnyvu4ksu3"]},"@openzeppelin/contracts/token/ERC721/IERC721Enumerable.sol":{"keccak256":"0xe6bd1b1218338b6f9fe17776f48623b4ac3d8a40405f74a44bc23c00abe2ca13","license":"MIT","urls":["bzz-raw://0c354c3f6e9c487759aa7869be4fba68e0b2efc777b514d289c4cbd3ff8f7e1a","dweb:/ipfs/QmdF9LcSYVmiUCL7JxLEYmSLrjga6zJsujfi6sgEJD4M1z"]},"@openzeppelin/contracts/token/ERC721/IERC721Metadata.sol":{"keccak256":"0xccb917776f826ac6b68bd5a15a5f711e3967848a52ba11e6104d9a4f593314a7","license":"MIT","urls":["bzz-raw://430255ad2229ced6d880e61a67bdc6e48dbbaed8354a7c1fe918cd8b8714a886","dweb:/ipfs/QmTHY56odzqEpEC6v6tafaWMYY7vmULw25q5XHJLCCAeox"]},"@openzeppelin/contracts/utils/Address.sol":{"keccak256":"0xa6a15ddddcbf29d2922a1e0d4151b5d2d33da24b93cc9ebc12390e0d855532f8","license":"MIT","urls":["bzz-raw://7c119bcaecfa853d564ac88d312777f75fa1126a3bca88a3371adb0ad9f35cb0","dweb:/ipfs/QmY9UPuXeSKq86Zh38fE43VGQPhKMN34mkuFSFqPcr6nvZ"]},"contracts/AaveNFTAuction.sol":{"keccak256":"0x6c4ea7d42d320fef9761518bf02f9df7e1fda5af0bc5a9baf508bcb6d7862044","license":"agpl-3.0","urls":["bzz-raw://f7b637c7554e176224b8996b39ed4dcd1e2e0644e66a972a0f674e65bdda1144","dweb:/ipfs/Qme7Q3ZvqoQMzRAQEnKPdDa3CmURi5NApCTTCvdYFAd378"]},"contracts/interface/IAaveNFT.sol":{"keccak256":"0xe1ffd310d28f6ab475628a1b4aefc1155aa448ad398fc8ce4d1ae942653ed164","license":"agpl-3.0","urls":["bzz-raw://12202d2f9df675b6c932162e51753ac3a44c0beba59f6226a0f1bb6bb8c433db","dweb:/ipfs/QmSNz1kac53jJzPCYKEhHZ2GcmkMrGXpxodjYkax8V5egX"]},"contracts/interface/IStakedAave.sol":{"keccak256":"0x83db021e1c11ec6951511fdf2de0a845fcd5a719b9dd89013d7af8a6550933ef","license":"agpl-3.0","urls":["bzz-raw://eb81399c4fc4c254e50d90cabead8610c17c04994f061872b27e239e8b67a42a","dweb:/ipfs/QmUoxUGzCnhnT2izS5huQJUpzTpfLM6vMDY34QieM9783i"]}},"version":1},"version":1,"checkPoints":[]}